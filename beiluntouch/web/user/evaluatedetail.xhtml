<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">

    <ui:composition>
        <p:dialog id="detailDlg" widgetVar="detail" modal="true" resizable="false" appendTo="@(body)"
                  header="#{msgs.evaluateStaff}" onShow="VirtualKeyboard.toggle('detailForm:reasonArea','softkey');" onHide="VirtualKeyboard.toggle('detailForm:reasonArea','softkey');">
            <h:form id="detailForm">
                <!--<p:growl showDetail="true" showSummary="true" autoUpdate="true" />-->
                <h:panelGrid columns="2" cellpadding="10">
                    <p:graphicImage name="/images/#{evaluateBean.selectedEmployee.picture}" 
                                    width="198" height="255" /> 
                    <p:selectOneRadio id="grid" value="#{evaluateBean.appraisalValue}" layout="grid" columns="1">  
                        <f:selectItems value="#{evaluateBean.appraisalItems}"/>
                        <p:ajax listener="#{evaluateBean.onSelectLevel}" update="reasonArea"/>
                    </p:selectOneRadio>
                    <p:outputLabel value="#{evaluateBean.selectedEmployee.name}" style="margin-left: 70px"/>
                </h:panelGrid>
                <br />
                #{msgs.reason}
                <br />
                <p:selectOneMenu value="#{evaluateBean.reasonValue}">
                        <f:selectItem itemLabel="请选择常用原因" itemValue=""/>
                        <f:selectItems value="#{evaluateBean.reasonItems}" />
                        <p:ajax listener="#{evaluateBean.onSelectReason}" update="reasonArea" />
                    </p:selectOneMenu>
                <br />
                <p:inputTextarea requiredMessage="此评价等级必须输入原因！" required="#{evaluateBean.reasonRequired}" id="reasonArea" maxlength="2000" rows="5" cols="64" value="#{evaluateBean.reason}"  widgetVar="txtReason" onfocus="VirtualKeyboard.attachInput(this)"/>
                <p:message for="reasonArea" />
                <h:panelGrid columns="2">                    
                    <p:outputLabel value="#{msgs.appraiser}" />
                    <p:inputText value="#{evaluateBean.appraiser}" widgetVar="txtAppraiser" onfocus="VirtualKeyboard.attachInput(this)" />
                    <p:outputLabel value="#{msgs.contact}" />
                    <p:inputText value="#{evaluateBean.contact}" widgetVar="txtContact" onfocus="VirtualKeyboard.attachInput(this)" />
                </h:panelGrid>
                <p:commandButton value="#{msgs.submit}" actionListener="#{evaluateBean.save}" />
                <p:button value="取消" onclick="PF('detail').hide();return false;"/>
                <p:button style="float: right" id="btnInput" widgetVar="btnInput" value="中英切换" onclick="if($('#kb_langselector').val()=='CN Chinese Simpl. Pinyin'){VirtualKeyboard.switchLayout('US US');}else{VirtualKeyboard.switchLayout('CN Chinese Simpl. Pinyin');}return false;"/>
                <div id="softkey"></div>
            </h:form>
        </p:dialog>
    </ui:composition>
</html>

